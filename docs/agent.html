
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Agents &#8212; FallModel 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Monitor" href="monitor.html" />
    <link rel="prev" title="Network" href="network.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="monitor.html" title="Monitor"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="network.html" title="Network"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">FallModel 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="agents">
<h1>Agents<a class="headerlink" href="#agents" title="Permalink to this headline">¶</a></h1>
<p>Agents act using 5 step algorithm established in SPmodelling’s agents. Each stage is broken down below. The Agent recieves
an already filtered perception from the node which is fed into step 1.</p>
<div class="section" id="fall-agent-algorithm">
<h2>Fall Agent Algorithm<a class="headerlink" href="#fall-agent-algorithm" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><dl class="simple">
<dt>Perception</dt><dd><ul class="simple">
<li><p>Remove Edges where Agent.Energy &lt; Edge.Energy + Edge.End_Node.Energy</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Choose</dt><dd><ul class="simple">
<li><p>Remove Edges where Node.Effort &gt; Edge.Mobility*(Agent.Mobility + Agent.Confidence*Agent.Mobility_Resources) + Edge.Confidence(Agent.Confidence + Agent.Mobility*Agent.Confidence_Resources)</p></li>
<li><p>Select Edge with max(Edge.worth)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Move</dt><dd><ul class="simple">
<li><p>Delete Agents existing location edge</p></li>
<li><p>Create new edge from agent to Edge.End_Node for the selected Edge</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Payment</dt><dd><ul class="simple">
<li><p>Deduct Edge.Energy from Agent.Energy</p></li>
<li><dl class="simple">
<dt>Add Edge.Mobility_Modifier to Agent.Mobility</dt><dd><ul>
<li><dl class="simple">
<dt>Update Agent.Wellbeing</dt><dd><ul>
<li><p>If Agent.Mobility &lt;= 0: Agent.Wellbeing = “Fallen”</p></li>
<li><p>Else If Agent.Mobility &gt; 1: Agent.Wellbeing = “Healthy”</p></li>
<li><p>Else If Agent.Wellbeing == “Healthy”: Agent.Wellbeing = “At Risk”</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><p>Add Edge.Confidence_Modifier to Agent.Confidence</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Learning</dt><dd><ul class="simple">
<li><p>Deduct Edge.End_Node.Energy from Agent.Energy</p></li>
<li><dl class="simple">
<dt>Add Edge.End_Node.Mobility_Modifier to Agent.Mobility</dt><dd><ul>
<li><dl class="simple">
<dt>Update Agent.Wellbeing</dt><dd><ul>
<li><p>If Agent.Mobility &lt;= 0: Agent.Wellbeing = “Fallen”</p></li>
<li><p>Else If Agent.Mobility &gt; 1: Agent.Wellbeing = “Healthy”</p></li>
<li><p>Else If Agent.Wellbeing == “Healthy”: Agent.Wellbeing = “At Risk”</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><p>Add Edge.End_Node.Confidence to Agent.Confidence</p></li>
<li><p>Add Edge.End_Node.Confidence_Resources to Agent.Confidence_Resources</p></li>
<li><p>Add Edge.End_Node.Mobility_Resources to Agent.Mobility_Resources</p></li>
<li><dl class="simple">
<dt>If Edge.End_Node is Care node:</dt><dd><p>Log Agent entering Care</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>If Edge.End_Node has a capacity:</dt><dd><p>Add 1 to Edge.End_Node.Load</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>If Agent has left Hospital:</dt><dd><p>Log Agent being Discharged</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Prediction*</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>If Edge.End_Node has Queue:</dt><dd><p>Run Agent prediction at new node</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ol>
</div>
<div class="section" id="module-Fall_agent">
<span id="agent-code"></span><h2>Agent Code<a class="headerlink" href="#module-Fall_agent" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="Fall_agent.Agent">
<em class="property">class </em><code class="sig-prename descclassname">Fall_agent.</code><code class="sig-name descname">Agent</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">agent_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Fall_agent.Agent" title="Permalink to this definition">¶</a></dt>
<dd><p>Agent for modelling patients with declining mobility</p>
<dl class="py method">
<dt id="Fall_agent.Agent.choose">
<code class="sig-name descname">choose</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tx</span></em>, <em class="sig-param"><span class="n">intf</span></em>, <em class="sig-param"><span class="n">perc</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Fall_agent.Agent.choose" title="Permalink to this definition">¶</a></dt>
<dd><p>Agents conscious choice from possible edges. This is based on the effort of the agent calculated from the
combination of agent and edge values. If the agent has the effort for multiple choices the worth of the edge is
used as a deciding factor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tx</strong> – neo4j database write transaction</p></li>
<li><p><strong>intf</strong> – Interface for calls to database</p></li>
<li><p><strong>perc</strong> – perception from node perception function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>single edge as final choice</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Fall_agent.Agent.generator">
<code class="sig-name descname">generator</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tx</span></em>, <em class="sig-param"><span class="n">intf</span></em>, <em class="sig-param"><span class="n">params</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Fall_agent.Agent.generator" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates Fall Agents and inserts them into the network at the home node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self</strong> – Agent</p></li>
<li><p><strong>tx</strong> – neo4j database transaction with write permission</p></li>
<li><p><strong>intf</strong> – An Interface() object to simplify interactions with the database</p></li>
<li><p><strong>params</strong> – [mobility, confidence, energy] these are the means for the normal distributions sampled to set</p></li>
</ul>
</dd>
</dl>
<p>parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Fall_agent.Agent.learn">
<code class="sig-name descname">learn</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tx</span></em>, <em class="sig-param"><span class="n">intf</span></em>, <em class="sig-param"><span class="n">choice</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Fall_agent.Agent.learn" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Agent is changed by node and can change node and edge it arrived by. This can include changes to decision</dt><dd><p>making parameters.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tx</strong> – neo4j database write transaction</p></li>
<li><p><strong>intf</strong> – Interface for database interaction</p></li>
<li><p><strong>choice</strong> – Chosen edge for move</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Fall_agent.Agent.logging">
<code class="sig-name descname">logging</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tx</span></em>, <em class="sig-param"><span class="n">intf</span></em>, <em class="sig-param"><span class="n">entry</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Fall_agent.Agent.logging" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility function for adding information to the agents log of its activities</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tx</strong> – neo4j database write transaction</p></li>
<li><p><strong>intf</strong> – Interface for database calls</p></li>
<li><p><strong>entry</strong> – String to be added to the log</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Fall_agent.Agent.move">
<code class="sig-name descname">move</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tx</span></em>, <em class="sig-param"><span class="n">intf</span></em>, <em class="sig-param"><span class="n">perc</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Fall_agent.Agent.move" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs complete agent movement algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tx</strong> – neo4j database write transaction</p></li>
<li><p><strong>intf</strong> – Interface for database calls</p></li>
<li><p><strong>perc</strong> – perception provided by the node the agent is currently located at</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Node Agent has moved to</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Fall_agent.Agent.payment">
<code class="sig-name descname">payment</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tx</span></em>, <em class="sig-param"><span class="n">intf</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Fall_agent.Agent.payment" title="Permalink to this definition">¶</a></dt>
<dd><p>Modifies chosen edge and agent. These include mobility, confidence and energy modifications.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tx</strong> – neo4j database write transaction</p></li>
<li><p><strong>intf</strong> – Interface for databse calls</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Fall_agent.Agent.perception">
<code class="sig-name descname">perception</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tx</span></em>, <em class="sig-param"><span class="n">intf</span></em>, <em class="sig-param"><span class="n">perc</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Fall_agent.Agent.perception" title="Permalink to this definition">¶</a></dt>
<dd><p>Fall agent perception function. Filters based on agent having sufficient energy for edge and end node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tx</strong> – neo4j write transaction</p></li>
<li><p><strong>intf</strong> – Interface instance to simplify database calls</p></li>
<li><p><strong>perc</strong> – perception recieved from the node</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Fall_agent.Agent.positive">
<em class="property">static </em><code class="sig-name descname">positive</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">num</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Fall_agent.Agent.positive" title="Permalink to this definition">¶</a></dt>
<dd><p>basic function to floor a number at zero</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>num</strong> – real number</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>real number</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-Fall_Population">
<span id="population"></span><h2>Population<a class="headerlink" href="#module-Fall_Population" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="Fall_Population.check">
<code class="sig-prename descclassname">Fall_Population.</code><code class="sig-name descname">check</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ses</span></em>, <em class="sig-param"><span class="n">ps</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Fall_Population.check" title="Permalink to this definition">¶</a></dt>
<dd><p>confirms number of agents below designated population size. If population correct returns false</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ses</strong> – neo4j database session</p></li>
<li><p><strong>ps</strong> – int population size to be maintained</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>int number of agents below population size or false if population correct</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Fall_Population.countactiveagents">
<code class="sig-prename descclassname">Fall_Population.</code><code class="sig-name descname">countactiveagents</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tx</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Fall_Population.countactiveagents" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility function provides the number of agents in the database discounting those are the Care Node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tx</strong> – neo4j database read transaction</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>number of active agents in system</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Agents</a><ul>
<li><a class="reference internal" href="#fall-agent-algorithm">Fall Agent Algorithm</a></li>
<li><a class="reference internal" href="#module-Fall_agent">Agent Code</a></li>
<li><a class="reference internal" href="#module-Fall_Population">Population</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="network.html"
                        title="previous chapter">Network</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="monitor.html"
                        title="next chapter">Monitor</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/agent.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="monitor.html" title="Monitor"
             >next</a> |</li>
        <li class="right" >
          <a href="network.html" title="Network"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">FallModel 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Penny Faulkner Rainford.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.2.
    </div>
  </body>
</html>